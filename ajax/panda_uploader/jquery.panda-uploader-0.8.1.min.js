var a,swfobject=function(){function b(){if(!G){try{var c=q.getElementsByTagName("body")[0].appendChild(C("span"));c.parentNode.removeChild(c)}catch(d){return}G=true;c=N.length;for(var f=0;f<c;f++)N[f]()}}function e(c){if(G)c();else N[N.length]=c}function j(c){if(typeof x.addEventListener!=s)x.addEventListener("load",c,false);else if(typeof q.addEventListener!=s)q.addEventListener("load",c,false);else if(typeof x.attachEvent!=s)ga(x,"onload",c);else if(typeof x.onload=="function"){var d=x.onload;x.onload=
function(){d();c()}}else x.onload=c}function r(){Z?n():g()}function n(){var c=q.getElementsByTagName("body")[0],d=C(z);d.setAttribute("type",O);var f=c.appendChild(d);if(f){var i=0;(function(){if(typeof f.GetVariable!=s){var k=f.GetVariable("$version");if(k){k=k.split(" ")[1].split(",");l.pv=[parseInt(k[0],10),parseInt(k[1],10),parseInt(k[2],10)]}}else if(i<10){i++;setTimeout(arguments.callee,10);return}c.removeChild(d);f=null;g()})()}else g()}function g(){var c=D.length;if(c>0)for(var d=0;d<c;d++){var f=
D[d].id,i=D[d].callbackFn,k={success:false,id:f};if(l.pv[0]>0){var o=y(f);if(o)if(P(D[d].swfVersion)&&!(l.wk&&l.wk<312)){H(f,true);if(i){k.success=true;k.ref=h(f);i(k)}}else if(D[d].expressInstall&&m()){k={};k.data=D[d].expressInstall;k.width=o.getAttribute("width")||"0";k.height=o.getAttribute("height")||"0";if(o.getAttribute("class"))k.styleclass=o.getAttribute("class");if(o.getAttribute("align"))k.align=o.getAttribute("align");var p={};o=o.getElementsByTagName("param");for(var t=o.length,w=0;w<
t;w++)if(o[w].getAttribute("name").toLowerCase()!="movie")p[o[w].getAttribute("name")]=o[w].getAttribute("value");v(k,p,f,i)}else{u(o);i&&i(k)}}else{H(f,true);if(i){if((f=h(f))&&typeof f.SetVariable!=s){k.success=true;k.ref=f}i(k)}}}}function h(c){var d=null;if((c=y(c))&&c.nodeName=="OBJECT")if(typeof c.SetVariable!=s)d=c;else if(c=c.getElementsByTagName(z)[0])d=c;return d}function m(){return!Q&&P("6.0.65")&&(l.win||l.mac)&&!(l.wk&&l.wk<312)}function v(c,d,f,i){Q=true;W=i||null;aa={success:false,
id:f};var k=y(f);if(k){if(k.nodeName=="OBJECT"){K=L(k);R=null}else{K=k;R=f}c.id=ba;if(typeof c.width==s||!/%$/.test(c.width)&&parseInt(c.width,10)<310)c.width="310";if(typeof c.height==s||!/%$/.test(c.height)&&parseInt(c.height,10)<137)c.height="137";q.title=q.title.slice(0,47)+" - Flash Player Installation";i=l.ie&&l.win?"ActiveX":"PlugIn";i="MMredirectURL="+x.location.toString().replace(/&/g,"%26")+"&MMplayerType="+i+"&MMdoctitle="+q.title;if(typeof d.flashvars!=s)d.flashvars+="&"+i;else d.flashvars=
i;if(l.ie&&l.win&&k.readyState!=4){i=C("div");f+="SWFObjectNew";i.setAttribute("id",f);k.parentNode.insertBefore(i,k);k.style.display="none";(function(){k.readyState==4?k.parentNode.removeChild(k):setTimeout(arguments.callee,10)})()}I(c,d,f)}}function u(c){if(l.ie&&l.win&&c.readyState!=4){var d=C("div");c.parentNode.insertBefore(d,c);d.parentNode.replaceChild(L(c),d);c.style.display="none";(function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)})()}else c.parentNode.replaceChild(L(c),
c)}function L(c){var d=C("div");if(l.win&&l.ie)d.innerHTML=c.innerHTML;else if(c=c.getElementsByTagName(z)[0])if(c=c.childNodes)for(var f=c.length,i=0;i<f;i++)!(c[i].nodeType==1&&c[i].nodeName=="PARAM")&&c[i].nodeType!=8&&d.appendChild(c[i].cloneNode(true));return d}function I(c,d,f){var i,k=y(f);if(l.wk&&l.wk<312)return i;if(k){if(typeof c.id==s)c.id=f;if(l.ie&&l.win){var o="";for(var p in c)if(c[p]!=Object.prototype[p])if(p.toLowerCase()=="data")d.movie=c[p];else if(p.toLowerCase()=="styleclass")o+=
' class="'+c[p]+'"';else if(p.toLowerCase()!="classid")o+=" "+p+'="'+c[p]+'"';p="";for(var t in d)if(d[t]!=Object.prototype[t])p+='<param name="'+t+'" value="'+d[t]+'" />';k.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+p+"</object>";S[S.length]=c.id;i=y(c.id)}else{t=C(z);t.setAttribute("type",O);for(o in c)if(c[o]!=Object.prototype[o])if(o.toLowerCase()=="styleclass")t.setAttribute("class",c[o]);else o.toLowerCase()!="classid"&&t.setAttribute(o,c[o]);for(var w in d)d[w]!=
Object.prototype[w]&&w.toLowerCase()!="movie"&&X(t,w,d[w]);k.parentNode.replaceChild(t,k);i=t}}return i}function X(c,d,f){var i=C("param");i.setAttribute("name",d);i.setAttribute("value",f);c.appendChild(i)}function ca(c){var d=y(c);if(d&&d.nodeName=="OBJECT")if(l.ie&&l.win){d.style.display="none";(function(){d.readyState==4?ha(c):setTimeout(arguments.callee,10)})()}else d.parentNode.removeChild(d)}function ha(c){if(c=y(c)){for(var d in c)if(typeof c[d]=="function")c[d]=null;c.parentNode.removeChild(c)}}
function y(c){var d=null;try{d=q.getElementById(c)}catch(f){}return d}function C(c){return q.createElement(c)}function ga(c,d,f){c.attachEvent(d,f);J[J.length]=[c,d,f]}function P(c){var d=l.pv;c=c.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return d[0]>c[0]||d[0]==c[0]&&d[1]>c[1]||d[0]==c[0]&&d[1]==c[1]&&d[2]>=c[2]?true:false}function da(c,d,f,i){if(!(l.ie&&l.mac)){var k=q.getElementsByTagName("head")[0];if(k){f=f&&typeof f=="string"?f:"screen";if(i)Y=A=null;
if(!A||Y!=f){i=C("style");i.setAttribute("type","text/css");i.setAttribute("media",f);A=k.appendChild(i);if(l.ie&&l.win&&typeof q.styleSheets!=s&&q.styleSheets.length>0)A=q.styleSheets[q.styleSheets.length-1];Y=f}if(l.ie&&l.win)A&&typeof A.addRule==z&&A.addRule(c,d);else A&&typeof q.createTextNode!=s&&A.appendChild(q.createTextNode(c+" {"+d+"}"))}}}function H(c,d){if(ea){d=d?"visible":"hidden";if(G&&y(c))y(c).style.visibility=d;else da("#"+c,"visibility:"+d)}}function fa(c){return/[\\\"<>\.;]/.exec(c)!=
null&&typeof encodeURIComponent!=s?encodeURIComponent(c):c}var s="undefined",z="object",O="application/x-shockwave-flash",ba="SWFObjectExprInst",x=window,q=document,E=navigator,Z=false,N=[r],D=[],S=[],J=[],K,R,W,aa,G=false,Q=false,A,Y,ea=true,l=function(){var c=typeof q.getElementById!=s&&typeof q.getElementsByTagName!=s&&typeof q.createElement!=s,d=E.userAgent.toLowerCase(),f=E.platform.toLowerCase(),i=f?/win/.test(f):/win/.test(d);f=f?/mac/.test(f):/mac/.test(d);d=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):false;var k=!+"\u000b1",o=[0,0,0],p=null;if(typeof E.plugins!=s&&typeof E.plugins["Shockwave Flash"]==z){if((p=E.plugins["Shockwave Flash"].description)&&!(typeof E.mimeTypes!=s&&E.mimeTypes[O]&&!E.mimeTypes[O].enabledPlugin)){Z=true;k=false;p=p.replace(/^.*\s+(\S+\s+\S+$)/,"$1");o[0]=parseInt(p.replace(/^(.*)\..*$/,"$1"),10);o[1]=parseInt(p.replace(/^.*\.(.*)\s.*$/,"$1"),10);o[2]=/[a-zA-Z]/.test(p)?parseInt(p.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof x.ActiveXObject!=s)try{var t=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)if(p=t.GetVariable("$version")){k=true;p=p.split(" ")[1].split(",");o=[parseInt(p[0],10),parseInt(p[1],10),parseInt(p[2],10)]}}catch(w){}return{w3:c,pv:o,wk:d,ie:k,win:i,mac:f}}();(function(){if(l.w3){if(typeof q.readyState!=s&&q.readyState=="complete"||typeof q.readyState==s&&(q.getElementsByTagName("body")[0]||q.body))b();if(!G){typeof q.addEventListener!=s&&q.addEventListener("DOMContentLoaded",b,false);if(l.ie&&l.win){q.attachEvent("onreadystatechange",
function(){if(q.readyState=="complete"){q.detachEvent("onreadystatechange",arguments.callee);b()}});x==top&&function(){if(!G){try{q.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}b()}}()}l.wk&&function(){G||(/loaded|complete/.test(q.readyState)?b():setTimeout(arguments.callee,0))}();j(b)}}})();(function(){l.ie&&l.win&&window.attachEvent("onunload",function(){for(var c=J.length,d=0;d<c;d++)J[d][0].detachEvent(J[d][1],J[d][2]);c=S.length;for(d=0;d<c;d++)ca(S[d]);for(var f in l)l[f]=
null;l=null;for(var i in swfobject)swfobject[i]=null;swfobject=null})})();return{registerObject:function(c,d,f,i){if(l.w3&&c&&d){var k={};k.id=c;k.swfVersion=d;k.expressInstall=f;k.callbackFn=i;D[D.length]=k;H(c,false)}else i&&i({success:false,id:c})},getObjectById:function(c){if(l.w3)return h(c)},embedSWF:function(c,d,f,i,k,o,p,t,w,M){var T={success:false,id:d};if(l.w3&&!(l.wk&&l.wk<312)&&c&&d&&f&&i&&k){H(d,false);e(function(){f+="";i+="";var F={};if(w&&typeof w===z)for(var B in w)F[B]=w[B];F.data=
c;F.width=f;F.height=i;B={};if(t&&typeof t===z)for(var U in t)B[U]=t[U];if(p&&typeof p===z)for(var V in p)if(typeof B.flashvars!=s)B.flashvars+="&"+V+"="+p[V];else B.flashvars=V+"="+p[V];if(P(k)){U=I(F,B,d);F.id==d&&H(d,true);T.success=true;T.ref=U}else if(o&&m()){F.data=o;v(F,B,d,M);return}else H(d,true);M&&M(T)})}else M&&M(T)},switchOffAutoHideShow:function(){ea=false},ua:l,getFlashPlayerVersion:function(){return{major:l.pv[0],minor:l.pv[1],release:l.pv[2]}},hasFlashPlayerVersion:P,createSWF:function(c,
d,f){if(l.w3)return I(c,d,f)},showExpressInstall:function(c,d,f,i){l.w3&&m()&&v(c,d,f,i)},removeSWF:function(c){l.w3&&ca(c)},createCSS:function(c,d,f,i){l.w3&&da(c,d,f,i)},addDomLoadEvent:e,addLoadEvent:j,getQueryParamValue:function(c){var d=q.location.search||q.location.hash;if(d){if(/\?/.test(d))d=d.split("?")[1];if(c==null)return fa(d);d=d.split("&");for(var f=0;f<d.length;f++)if(d[f].substring(0,d[f].indexOf("="))==c)return fa(d[f].substring(d[f].indexOf("=")+1))}return""},expressInstallCallback:function(){if(Q){var c=
y(ba);if(c&&K){c.parentNode.replaceChild(K,c);if(R){H(R,true);if(l.ie&&l.win)K.style.display="block"}W&&W(aa)}Q=false}}}}(),SWFUpload;if(SWFUpload==undefined)SWFUpload=function(b){this.initSWFUpload(b)};
SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(e){delete SWFUpload.instances[this.movieName];throw e;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){if(typeof b!=="string"||b.match(/^https?:\/\//i)||b.match(/^\//))return b;var e=window.location.pathname.lastIndexOf("/");path=e<=0?"/":window.location.pathname.substr(0,e)+"/";return path+b};a=SWFUpload.prototype;
a.initSettings=function(){this.ensureDefault=function(b,e){this.settings[b]=this.settings[b]==undefined?e:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(this.settings.prevent_swf_caching)this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime();if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};
a.loadFlash=function(){var b,e;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";b=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(b==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;e=document.createElement("div");e.innerHTML=this.getFlashHTML();b.parentNode.replaceChild(e.firstChild,b);if(window[this.movieName]==undefined)window[this.movieName]=
this.getMovieElement()};
a.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
a.getFlashVars=function(){var b=this.buildParamString(),e=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(e),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};a.getMovieElement=function(){if(this.movieElement==undefined)this.movieElement=document.getElementById(this.movieName);if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement};
a.buildParamString=function(){var b=this.settings.post_params,e=[];if(typeof b==="object")for(var j in b)b.hasOwnProperty(j)&&e.push(encodeURIComponent(j.toString())+"="+encodeURIComponent(b[j].toString()));return e.join("&amp;")};
a.destroy=function(){try{this.cancelUpload(null,false);var b=null;if((b=this.getMovieElement())&&typeof b.CallFunction==="unknown"){for(var e in b)try{if(typeof b[e]==="function")b[e]=null}catch(j){}try{b.parentNode.removeChild(b)}catch(r){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return true}catch(n){return false}};
a.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n\tfile_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n\tfile_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n\tfile_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n\tupload_start_handler assigned:      ",(typeof this.settings.upload_start_handler===
"function").toString(),"\n\tupload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n\tupload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n\tupload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n\tupload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n\tdebug_handler assigned:             ",
(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};a.addSetting=function(b,e,j){return e==undefined?(this.settings[b]=j):(this.settings[b]=e)};a.getSetting=function(b){if(this.settings[b]!=undefined)return this.settings[b];return""};
a.callFlash=function(b,e){e=e||[];var j=this.getMovieElement(),r,n;try{n=j.CallFunction('<invoke name="'+b+'" returntype="javascript">'+__flash__argumentsToXML(e,0)+"</invoke>");r=eval(n)}catch(g){throw"Call to "+b+" failed";}if(r!=undefined&&typeof r.post==="object")r=this.unescapeFilePostParams(r);return r};a.selectFile=function(){this.callFlash("SelectFile")};a.selectFiles=function(){this.callFlash("SelectFiles")};a.startUpload=function(b){this.callFlash("StartUpload",[b])};
a.cancelUpload=function(b,e){if(e!==false)e=true;this.callFlash("CancelUpload",[b,e])};a.stopUpload=function(){this.callFlash("StopUpload")};a.getStats=function(){return this.callFlash("GetStats")};a.setStats=function(b){this.callFlash("SetStats",[b])};a.getFile=function(b){return typeof b==="number"?this.callFlash("GetFileByIndex",[b]):this.callFlash("GetFile",[b])};a.addFileParam=function(b,e,j){return this.callFlash("AddFileParam",[b,e,j])};
a.removeFileParam=function(b,e){this.callFlash("RemoveFileParam",[b,e])};a.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};a.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};a.addPostParam=function(b,e){this.settings.post_params[b]=e;this.callFlash("SetPostParams",[this.settings.post_params])};a.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};
a.setFileTypes=function(b,e){this.settings.file_types=b;this.settings.file_types_description=e;this.callFlash("SetFileTypes",[b,e])};a.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};a.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};a.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};
a.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};a.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};a.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};a.setHTTPSuccess=function(b){if(typeof b==="string")b=b.replace(" ","").split(",");this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};
a.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};a.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};a.setButtonImageURL=function(b){if(b==undefined)b="";this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};
a.setButtonDimensions=function(b,e){this.settings.button_width=b;this.settings.button_height=e;var j=this.getMovieElement();if(j!=undefined){j.style.width=b+"px";j.style.height=e+"px"}this.callFlash("SetButtonDimensions",[b,e])};a.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};a.setButtonTextPadding=function(b,e){this.settings.button_text_top_padding=e;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,e])};
a.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};a.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};a.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};a.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};
a.queueEvent=function(b,e){if(e==undefined)e=[];else e instanceof Array||(e=[e]);var j=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,e)});setTimeout(function(){j.executeNextEvent()},0)}else if(this.settings[b]!==null)throw"Event handler "+b+" is unknown or is not a function";};a.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;typeof b==="function"&&b.apply(this)};
a.unescapeFilePostParams=function(b){var e=/[$]([0-9a-f]{4})/i,j={},r;if(b!=undefined){for(var n in b.post)if(b.post.hasOwnProperty(n)){r=n;for(var g;(g=e.exec(r))!==null;)r=r.replace(g[0],String.fromCharCode(parseInt("0x"+g[1],16)));j[r]=b.post[n]}b.post=j}return b};a.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};a.flashReady=function(){var b=this.getMovieElement();if(b){this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")}else this.debug("Flash called back ready but the flash movie can't be found.")};
a.cleanUp=function(b){try{if(this.movieElement&&typeof b.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var e in b)try{if(typeof b[e]==="function")b[e]=null}catch(j){}}}catch(r){}window.__flash__removeCallback=function(n,g){try{if(n)n[g]=null}catch(h){}}};a.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
a.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};a.fileQueueError=function(b,e,j){b=this.unescapeFilePostParams(b);this.queueEvent("file_queue_error_handler",[b,e,j])};a.fileDialogComplete=function(b,e,j){this.queueEvent("file_dialog_complete_handler",[b,e,j])};a.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};
a.returnUploadStart=function(b){var e;if(typeof this.settings.upload_start_handler==="function"){b=this.unescapeFilePostParams(b);e=this.settings.upload_start_handler.call(this,b)}else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";if(e===undefined)e=true;e=!!e;this.callFlash("ReturnUploadStart",[e])};a.uploadProgress=function(b,e,j){b=this.unescapeFilePostParams(b);this.queueEvent("upload_progress_handler",[b,e,j])};
a.uploadError=function(b,e,j){b=this.unescapeFilePostParams(b);this.queueEvent("upload_error_handler",[b,e,j])};a.uploadSuccess=function(b,e,j){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,e,j])};a.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};a.debug=function(b){this.queueEvent("debug_handler",b)};
a.debugMessage=function(b){if(this.settings.debug){var e=[];if(typeof b==="object"&&typeof b.name==="string"&&typeof b.message==="string"){for(var j in b)b.hasOwnProperty(j)&&e.push(j+": "+b[j]);b=e.join("\n")||"";e=b.split("\n");b="EXCEPTION: "+e.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(b)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(b){var e,j;try{e=document.getElementById("SWFUpload_Console");if(!e){j=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(j);e=document.createElement("textarea");e.id="SWFUpload_Console";e.style.fontFamily="monospace";e.setAttribute("wrap","off");e.wrap="off";e.style.overflow="auto";e.style.width="700px";e.style.height="350px";e.style.margin="5px";j.appendChild(e)}e.value+=b+"\n";e.scrollTop=e.scrollHeight-e.clientHeight}catch(r){alert("Exception: "+
r.name+" Message: "+r.message)}};
(function(b){var e=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"],j=[];b.fn.swfupload=function(){var r=b.makeArray(arguments);return this.each(function(){var n;if(r.length==1&&typeof r[0]=="object"){n=b(this).data("__swfu");if(!n){var g=r[0],h=b(this);n=[];b.merge(n,
e);b.merge(n,j);b.each(n,function(v,u){var L=u.replace(/_handler$/,"").replace(/_([a-z])/g,function(I,X){return X.toUpperCase()});g[u]=function(){var I=b.Event(L);h.trigger(I,b.makeArray(arguments));return!I.isDefaultPrevented()}});b(this).data("__swfu",new SWFUpload(g))}}else if(r.length>0&&typeof r[0]=="string"){var m=r.shift();(n=b(this).data("__swfu"))&&n[m]&&n[m].apply(n,r)}})};b.swfupload={additionalHandlers:function(){if(arguments.length===0)return j.slice();else b(arguments).each(function(r,
n){b.merge(j,b.makeArray(n))})},defaultHandlers:function(){return e.slice()},getInstance:function(r){return b(r).data("__swfu")}}})(jQuery);
(function(){function b(g,h,m){this.form=g;this.options=h;this.uploader=m}function e(g,h,m){b.apply(this,[g,h,m]);this.num_errors=this.num_pending=this.num_files=0;this.status=STOP}function j(g,h,m){b.apply(this,[g,h,m])}function r(g){this.options=g;this.$p=jQuery("#"+this.options.upload_progress_id);this.$p.css("display","none");this.count=0}function n(g,h){return function(){return g[h].apply(g,arguments)}}UPLOADING=0;STOP=1;jQuery.fn.pandaUploader=function(g,h,m){var v=this.parents("form")[0];if(g===
undefined){alert("There was an error setting up the upload form. (The upload parameters were not specified).");return false}h=h===undefined?{}:h;m=m===undefined?{}:m;if(h.upload_button_id===undefined){alert("You have to specify the button id");return false}if(this.size()==0){alert("The jQuery element is empty. Method pandaUploader() cannot be executed");return false}if(!v){alert("Could not find a suitable form. Please place the call to pandaUploader() after the form, or to be executed onload().");
return false}if($(v).find("[name=submit], #submit").length!=0){alert('An element of your video upload form is incorrect (most probably the submit button). Neither NAME nor ID can be set to "submit" on any field.');return false}h=jQuery.extend({upload_filename_id:null,upload_progress_id:null,api_host:"api.pandastream.com",progress_handler:null,uploader_dir:"/panda_uploader",disable_submit_button:true,strategy:"upload_on_submit"},h);h.api_url=h.api_url||"http://"+h.api_host+"/v2";if(!h.progress_handler)h.progress_handler=
new r(h);var u=this.swfupload(jQuery.extend({upload_url:h.api_url+"/videos.json",file_size_limit:0,file_types:"*.*",file_types_description:"All Files",file_upload_limit:0,flash_url:h.uploader_dir+"/swfupload.swf",button_image_url:h.uploader_dir+"/choose_file_button.png",button_width:87,button_height:27,button_placeholder_id:h.upload_button_id,file_post_name:"file",debug:false},m));m=null;switch(h.strategy){case "upload_on_submit":m=e;break;case "upload_on_select":m=j;break;default:m=h.strategy}strategy=
new m(v,h,u);u.bind("fileQueued",function(){u.data("__swfu").setPostParams(g.call?g():g);console.log(u.data("__swfu").settings.post_params)});u.bind("swfuploadLoaded",n(strategy,"onLoad"));u.bind("fileQueued",n(strategy,"onFileQueued"));u.bind("uploadStart",n(strategy,"onStart"));u.bind("uploadProgress",n(strategy,"onProgress"));u.bind("uploadSuccess",n(strategy,"onSuccess"));u.bind("uploadError",n(strategy,"onError"));u.bind("uploadComplete",n(strategy,"onComplete"));(h=jQuery("#"+h.upload_cancel_button_id))&&
h.click(n(strategy,"onCancel"));return u};b.prototype={disableSubmitButton:function(g){$(this.form).find("input[type=submit]").attr("disabled",g)},onLoad:function(){this.uploader.parents("form").eq(0).submit(n(this,"onSubmit"));this.options.disable_submit_button&&this.disableSubmitButton(true)},onSubmit:function(){},onFileQueued:function(){},onStart:function(){},onProgress:function(){},onSuccess:function(){},onError:function(){},onComplete:function(){},triggerEvent:function(g,h,m){if(g=this.options[g])g.apply(this,
h);else m&&m()}};e.prototype=new b;e.prototype.constructor=e;e.prototype.onFileQueued=function(g,h){this.num_files++;this.num_pending++;g=$("#"+this.options.upload_filename_id);if(g.size()!=0){g.val(h.name);this.disableSubmitButton(false)}};e.prototype.onSubmit=function(){if(this.num_files>0){this.uploader.swfupload("startUpload");return false}};e.prototype.onStart=function(g,h){this.status=UPLOADING;this.uploader.swfupload("setButtonDisabled",true);this.options.progress_handler.reset();this.disableSubmitButton(true);
this.options.progress_handler&&this.options.progress_handler.start(h);this.triggerEvent("start",[g,h])};e.prototype.onCancel=function(g){this.uploader.swfupload("cancelUpload","",false);this.uploader.swfupload("setButtonDisabled",false);$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.num_errors=this.num_pending=this.num_files=0;this.options.disableSubmitButton&&this.disableSubmitButton(true);this.uploader.status==UPLOADING&&this.triggerEvent("cancel",[g]);
this.status=STOP};e.prototype.onProgress=function(g,h,m,v){try{this.options.progress_handler&&this.options.progress_handler.setProgress(h,m,v)}catch(u){}};e.prototype.onSuccess=function(g,h,m){this.uploader.val(eval("("+m+")").id);this.num_pending--;this.triggerEvent("success",[g,h,m])};e.prototype.onError=function(g,h,m,v){$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.num_pending--;this.num_errors++;this.triggerEvent("error",[g,h,v],function(){alert("There was an error uploading the file.\n\nHTTP error code "+
v)})};e.prototype.onComplete=function(g){if(this.num_files>0&&this.num_pending<=0&&this.num_errors<=0)if(this.uploader.val()){this.status=STOP;var h=this;this.triggerEvent("complete",[g],function(){h.form.submit()})}else alert("The video ID was not stored on the form")};j.prototype=new b;j.prototype.constructor=j;j.prototype.onFileQueued=function(){this.uploader.swfupload("startUpload")};j.prototype.onStart=function(g,h){this.options.progress_handler.reset();this.disableSubmitButton(true);this.options.progress_handler&&
this.options.progress_handler.start(h);this.triggerEvent("start",[g,h])};j.prototype.onCancel=function(g){this.uploader.swfupload("cancelUpload","",false);this.uploader.swfupload("setButtonDisabled",false);$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.options.disableSubmitButton&&this.disableSubmitButton(true);this.uploader.status==UPLOADING&&this.triggerEvent("cancel",[g])};j.prototype.onProgress=function(g,h,m,v){try{this.options.progress_handler&&this.options.progress_handler.setProgress(h,
m,v)}catch(u){}};j.prototype.onSuccess=function(g,h,m){this.uploader.val(eval("("+m+")").id);this.num_pending--;this.triggerEvent("success",[g,h,m])};j.prototype.onError=function(g,h,m,v){$("#"+this.options.upload_filename_id).val("");this.options.progress_handler.reset();this.num_pending--;this.num_errors++;this.triggerEvent("error",[g,h,v],function(){alert("There was an error uploading the file.\n\nHTTP error code "+v)})};j.prototype.onComplete=function(g){if(this.uploader.val()){this.status=STOP;
this.triggerEvent("complete",[g])}else alert("The video ID was not stored on the form")};r.prototype={start:function(g){this.count=0;if(this.$p.size()!=0){this.$p.find(".progress-inside").size()==0&&this.$p.append('<div class="progress-inside"></div>');this.progress=this.$p.find(".progress-inside");this.setProgress(g,0,g.size);this.$p.css("display","block");var h=this;this.timer=setInterval(function(){h.animateBarBg()},20)}},setProgress:function(g,h,m){if(this.progress){g=Math.ceil(h/m*100);$(this.progress).css("width",
g+"%")}},animateBarBg:function(){this.count++;var g=this.$p.css("background-position");g=g?g.split(" "):0;if(this.count==37){this.count=0;this.$p.css("background-position",g+36+"px 0px")}else this.$p.css("background-position",g-1+"px 0px")},reset:function(){clearInterval(this.timer);$(this.progress).css("width","0%");this.$p.css("display","none")}}})();
