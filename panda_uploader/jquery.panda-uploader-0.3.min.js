var a,swfobject=function(){function b(){if(!K){try{var c=q.getElementsByTagName("body")[0].appendChild(C("span"));c.parentNode.removeChild(c)}catch(d){return}K=true;c=U.length;for(var g=0;g<c;g++)U[g]()}}function f(c){if(K)c();else U[U.length]=c}function k(c){if(typeof z.addEventListener!=r)z.addEventListener("load",c,false);else if(typeof q.addEventListener!=r)q.addEventListener("load",c,false);else if(typeof z.attachEvent!=r)P(z,"onload",c);else if(typeof z.onload=="function"){var d=z.onload;z.onload=
function(){d();c()}}else z.onload=c}function p(){ga?m():l()}function m(){var c=q.getElementsByTagName("body")[0],d=C(v);d.setAttribute("type",G);var g=c.appendChild(d);if(g){var h=0;(function(){if(typeof g.GetVariable!=r){var i=g.GetVariable("$version");if(i){i=i.split(" ")[1].split(",");j.pv=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]}}else if(h<10){h++;setTimeout(arguments.callee,10);return}c.removeChild(d);g=null;l()})()}else l()}function l(){var c=H.length;if(c>0)for(var d=0;d<c;d++){var g=
H[d].id,h=H[d].callbackFn,i={success:false,id:g};if(j.pv[0]>0){var n=x(g);if(n)if(A(H[d].swfVersion)&&!(j.wk&&j.wk<312)){t(g,true);if(h){i.success=true;i.ref=w(g);h(i)}}else if(H[d].expressInstall&&B()){i={};i.data=H[d].expressInstall;i.width=n.getAttribute("width")||"0";i.height=n.getAttribute("height")||"0";if(n.getAttribute("class"))i.styleclass=n.getAttribute("class");if(n.getAttribute("align"))i.align=n.getAttribute("align");var o={};n=n.getElementsByTagName("param");for(var s=n.length,u=0;u<
s;u++)if(n[u].getAttribute("name").toLowerCase()!="movie")o[n[u].getAttribute("name")]=n[u].getAttribute("value");M(i,o,g,h)}else{N(n);h&&h(i)}}else{t(g,true);if(h){if((g=w(g))&&typeof g.SetVariable!=r){i.success=true;i.ref=g}h(i)}}}}function w(c){var d=null;if((c=x(c))&&c.nodeName=="OBJECT")if(typeof c.SetVariable!=r)d=c;else if(c=c.getElementsByTagName(v)[0])d=c;return d}function B(){return!V&&A("6.0.65")&&(j.win||j.mac)&&!(j.wk&&j.wk<312)}function M(c,d,g,h){V=true;ca=h||null;ha={success:false,
id:g};var i=x(g);if(i){if(i.nodeName=="OBJECT"){Q=L(i);W=null}else{Q=i;W=g}c.id=da;if(typeof c.width==r||!/%$/.test(c.width)&&parseInt(c.width,10)<310)c.width="310";if(typeof c.height==r||!/%$/.test(c.height)&&parseInt(c.height,10)<137)c.height="137";q.title=q.title.slice(0,47)+" - Flash Player Installation";h=j.ie&&j.win?"ActiveX":"PlugIn";h="MMredirectURL="+z.location.toString().replace(/&/g,"%26")+"&MMplayerType="+h+"&MMdoctitle="+q.title;if(typeof d.flashvars!=r)d.flashvars+="&"+h;else d.flashvars=
h;if(j.ie&&j.win&&i.readyState!=4){h=C("div");g+="SWFObjectNew";h.setAttribute("id",g);i.parentNode.insertBefore(h,i);i.style.display="none";(function(){i.readyState==4?i.parentNode.removeChild(i):setTimeout(arguments.callee,10)})()}D(c,d,g)}}function N(c){if(j.ie&&j.win&&c.readyState!=4){var d=C("div");c.parentNode.insertBefore(d,c);d.parentNode.replaceChild(L(c),d);c.style.display="none";(function(){c.readyState==4?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)})()}else c.parentNode.replaceChild(L(c),
c)}function L(c){var d=C("div");if(j.win&&j.ie)d.innerHTML=c.innerHTML;else if(c=c.getElementsByTagName(v)[0])if(c=c.childNodes)for(var g=c.length,h=0;h<g;h++)!(c[h].nodeType==1&&c[h].nodeName=="PARAM")&&c[h].nodeType!=8&&d.appendChild(c[h].cloneNode(true));return d}function D(c,d,g){var h,i=x(g);if(j.wk&&j.wk<312)return h;if(i){if(typeof c.id==r)c.id=g;if(j.ie&&j.win){var n="";for(var o in c)if(c[o]!=Object.prototype[o])if(o.toLowerCase()=="data")d.movie=c[o];else if(o.toLowerCase()=="styleclass")n+=
' class="'+c[o]+'"';else if(o.toLowerCase()!="classid")n+=" "+o+'="'+c[o]+'"';o="";for(var s in d)if(d[s]!=Object.prototype[s])o+='<param name="'+s+'" value="'+d[s]+'" />';i.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+n+">"+o+"</object>";X[X.length]=c.id;h=x(c.id)}else{s=C(v);s.setAttribute("type",G);for(n in c)if(c[n]!=Object.prototype[n])if(n.toLowerCase()=="styleclass")s.setAttribute("class",c[n]);else n.toLowerCase()!="classid"&&s.setAttribute(n,c[n]);for(var u in d)d[u]!=
Object.prototype[u]&&u.toLowerCase()!="movie"&&R(s,u,d[u]);i.parentNode.replaceChild(s,i);h=s}}return h}function R(c,d,g){var h=C("param");h.setAttribute("name",d);h.setAttribute("value",g);c.appendChild(h)}function Y(c){var d=x(c);if(d&&d.nodeName=="OBJECT")if(j.ie&&j.win){d.style.display="none";(function(){d.readyState==4?ea(c):setTimeout(arguments.callee,10)})()}else d.parentNode.removeChild(d)}function ea(c){if(c=x(c)){for(var d in c)if(typeof c[d]=="function")c[d]=null;c.parentNode.removeChild(c)}}
function x(c){var d=null;try{d=q.getElementById(c)}catch(g){}return d}function C(c){return q.createElement(c)}function P(c,d,g){c.attachEvent(d,g);O[O.length]=[c,d,g]}function A(c){var d=j.pv;c=c.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return d[0]>c[0]||d[0]==c[0]&&d[1]>c[1]||d[0]==c[0]&&d[1]==c[1]&&d[2]>=c[2]?true:false}function S(c,d,g,h){if(!(j.ie&&j.mac)){var i=q.getElementsByTagName("head")[0];if(i){g=g&&typeof g=="string"?g:"screen";if(h)fa=E=null;
if(!E||fa!=g){h=C("style");h.setAttribute("type","text/css");h.setAttribute("media",g);E=i.appendChild(h);if(j.ie&&j.win&&typeof q.styleSheets!=r&&q.styleSheets.length>0)E=q.styleSheets[q.styleSheets.length-1];fa=g}if(j.ie&&j.win)E&&typeof E.addRule==v&&E.addRule(c,d);else E&&typeof q.createTextNode!=r&&E.appendChild(q.createTextNode(c+" {"+d+"}"))}}}function t(c,d){if(ia){d=d?"visible":"hidden";if(K&&x(c))x(c).style.visibility=d;else S("#"+c,"visibility:"+d)}}function y(c){return/[\\\"<>\.;]/.exec(c)!=
null&&typeof encodeURIComponent!=r?encodeURIComponent(c):c}var r="undefined",v="object",G="application/x-shockwave-flash",da="SWFObjectExprInst",z=window,q=document,I=navigator,ga=false,U=[p],H=[],X=[],O=[],Q,W,ca,ha,K=false,V=false,E,fa,ia=true,j=function(){var c=typeof q.getElementById!=r&&typeof q.getElementsByTagName!=r&&typeof q.createElement!=r,d=I.userAgent.toLowerCase(),g=I.platform.toLowerCase(),h=g?/win/.test(g):/win/.test(d);g=g?/mac/.test(g):/mac/.test(d);d=/webkit/.test(d)?parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):false;var i=!+"\u000b1",n=[0,0,0],o=null;if(typeof I.plugins!=r&&typeof I.plugins["Shockwave Flash"]==v){if((o=I.plugins["Shockwave Flash"].description)&&!(typeof I.mimeTypes!=r&&I.mimeTypes[G]&&!I.mimeTypes[G].enabledPlugin)){ga=true;i=false;o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1");n[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10);n[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10);n[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof z.ActiveXObject!=r)try{var s=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(s)if(o=s.GetVariable("$version")){i=true;o=o.split(" ")[1].split(",");n=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]}}catch(u){}return{w3:c,pv:n,wk:d,ie:i,win:h,mac:g}}();(function(){if(j.w3){if(typeof q.readyState!=r&&q.readyState=="complete"||typeof q.readyState==r&&(q.getElementsByTagName("body")[0]||q.body))b();if(!K){typeof q.addEventListener!=r&&q.addEventListener("DOMContentLoaded",b,false);if(j.ie&&j.win){q.attachEvent("onreadystatechange",
function(){if(q.readyState=="complete"){q.detachEvent("onreadystatechange",arguments.callee);b()}});z==top&&function(){if(!K){try{q.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}b()}}()}j.wk&&function(){K||(/loaded|complete/.test(q.readyState)?b():setTimeout(arguments.callee,0))}();k(b)}}})();(function(){j.ie&&j.win&&window.attachEvent("onunload",function(){for(var c=O.length,d=0;d<c;d++)O[d][0].detachEvent(O[d][1],O[d][2]);c=X.length;for(d=0;d<c;d++)Y(X[d]);for(var g in j)j[g]=
null;j=null;for(var h in swfobject)swfobject[h]=null;swfobject=null})})();return{registerObject:function(c,d,g,h){if(j.w3&&c&&d){var i={};i.id=c;i.swfVersion=d;i.expressInstall=g;i.callbackFn=h;H[H.length]=i;t(c,false)}else h&&h({success:false,id:c})},getObjectById:function(c){if(j.w3)return w(c)},embedSWF:function(c,d,g,h,i,n,o,s,u,T){var Z={success:false,id:d};if(j.w3&&!(j.wk&&j.wk<312)&&c&&d&&g&&h&&i){t(d,false);f(function(){g+="";h+="";var J={};if(u&&typeof u===v)for(var F in u)J[F]=u[F];J.data=
c;J.width=g;J.height=h;F={};if(s&&typeof s===v)for(var aa in s)F[aa]=s[aa];if(o&&typeof o===v)for(var ba in o)if(typeof F.flashvars!=r)F.flashvars+="&"+ba+"="+o[ba];else F.flashvars=ba+"="+o[ba];if(A(i)){aa=D(J,F,d);J.id==d&&t(d,true);Z.success=true;Z.ref=aa}else if(n&&B()){J.data=n;M(J,F,d,T);return}else t(d,true);T&&T(Z)})}else T&&T(Z)},switchOffAutoHideShow:function(){ia=false},ua:j,getFlashPlayerVersion:function(){return{major:j.pv[0],minor:j.pv[1],release:j.pv[2]}},hasFlashPlayerVersion:A,createSWF:function(c,
d,g){if(j.w3)return D(c,d,g)},showExpressInstall:function(c,d,g,h){j.w3&&B()&&M(c,d,g,h)},removeSWF:function(c){j.w3&&Y(c)},createCSS:function(c,d,g,h){j.w3&&S(c,d,g,h)},addDomLoadEvent:f,addLoadEvent:k,getQueryParamValue:function(c){var d=q.location.search||q.location.hash;if(d){if(/\?/.test(d))d=d.split("?")[1];if(c==null)return y(d);d=d.split("&");for(var g=0;g<d.length;g++)if(d[g].substring(0,d[g].indexOf("="))==c)return y(d[g].substring(d[g].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var c=
x(da);if(c&&Q){c.parentNode.replaceChild(Q,c);if(W){t(W,true);if(j.ie&&j.win)Q.style.display="block"}ca&&ca(ha)}V=false}}}}(),SWFUpload;if(SWFUpload==undefined)SWFUpload=function(b){this.initSWFUpload(b)};
SWFUpload.prototype.initSWFUpload=function(b){try{this.customSettings={};this.settings=b;this.eventQueue=[];this.movieName="SWFUpload_"+SWFUpload.movieCount++;this.movieElement=null;SWFUpload.instances[this.movieName]=this;this.initSettings();this.loadFlash();this.displayDebugInfo()}catch(f){delete SWFUpload.instances[this.movieName];throw f;}};SWFUpload.instances={};SWFUpload.movieCount=0;SWFUpload.version="2.2.0 2009-03-25";
SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130};SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290};SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5};
SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120};SWFUpload.CURSOR={ARROW:-1,HAND:-2};SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"};SWFUpload.completeURL=function(b){if(typeof b!=="string"||b.match(/^https?:\/\//i)||b.match(/^\//))return b;var f=window.location.pathname.lastIndexOf("/");path=f<=0?"/":window.location.pathname.substr(0,f)+"/";return path+b};a=SWFUpload.prototype;
a.initSettings=function(){this.ensureDefault=function(b,f){this.settings[b]=this.settings[b]==undefined?f:this.settings[b]};this.ensureDefault("upload_url","");this.ensureDefault("preserve_relative_urls",false);this.ensureDefault("file_post_name","Filedata");this.ensureDefault("post_params",{});this.ensureDefault("use_query_string",false);this.ensureDefault("requeue_on_error",false);this.ensureDefault("http_success",[]);this.ensureDefault("assume_success_timeout",0);this.ensureDefault("file_types",
"*.*");this.ensureDefault("file_types_description","All Files");this.ensureDefault("file_size_limit",0);this.ensureDefault("file_upload_limit",0);this.ensureDefault("file_queue_limit",0);this.ensureDefault("flash_url","swfupload.swf");this.ensureDefault("prevent_swf_caching",true);this.ensureDefault("button_image_url","");this.ensureDefault("button_width",1);this.ensureDefault("button_height",1);this.ensureDefault("button_text","");this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;");
this.ensureDefault("button_text_top_padding",0);this.ensureDefault("button_text_left_padding",0);this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES);this.ensureDefault("button_disabled",false);this.ensureDefault("button_placeholder_id","");this.ensureDefault("button_placeholder",null);this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW);this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW);this.ensureDefault("debug",false);this.settings.debug_enabled=this.settings.debug;
this.settings.return_upload_start_handler=this.returnUploadStart;this.ensureDefault("swfupload_loaded_handler",null);this.ensureDefault("file_dialog_start_handler",null);this.ensureDefault("file_queued_handler",null);this.ensureDefault("file_queue_error_handler",null);this.ensureDefault("file_dialog_complete_handler",null);this.ensureDefault("upload_start_handler",null);this.ensureDefault("upload_progress_handler",null);this.ensureDefault("upload_error_handler",null);this.ensureDefault("upload_success_handler",
null);this.ensureDefault("upload_complete_handler",null);this.ensureDefault("debug_handler",this.debugMessage);this.ensureDefault("custom_settings",{});this.customSettings=this.settings.custom_settings;if(this.settings.prevent_swf_caching)this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime();if(!this.settings.preserve_relative_urls){this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url);this.settings.button_image_url=
SWFUpload.completeURL(this.settings.button_image_url)}delete this.ensureDefault};
a.loadFlash=function(){var b,f;if(document.getElementById(this.movieName)!==null)throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";b=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder;if(b==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;f=document.createElement("div");f.innerHTML=this.getFlashHTML();b.parentNode.replaceChild(f.firstChild,b);if(window[this.movieName]==undefined)window[this.movieName]=
this.getMovieElement()};
a.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload"><param name="wmode" value="',this.settings.button_window_mode,'" /><param name="movie" value="',this.settings.flash_url,'" /><param name="quality" value="high" /><param name="menu" value="false" /><param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+
this.getFlashVars()+'" />',"</object>"].join("")};
a.getFlashVars=function(){var b=this.buildParamString(),f=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(f),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",
encodeURIComponent(b),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),
"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),
"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")};a.getMovieElement=function(){if(this.movieElement==undefined)this.movieElement=document.getElementById(this.movieName);if(this.movieElement===null)throw"Could not find Flash element";return this.movieElement};
a.buildParamString=function(){var b=this.settings.post_params,f=[];if(typeof b==="object")for(var k in b)b.hasOwnProperty(k)&&f.push(encodeURIComponent(k.toString())+"="+encodeURIComponent(b[k].toString()));return f.join("&amp;")};
a.destroy=function(){try{this.cancelUpload(null,false);var b=null;if((b=this.getMovieElement())&&typeof b.CallFunction==="unknown"){for(var f in b)try{if(typeof b[f]==="function")b[f]=null}catch(k){}try{b.parentNode.removeChild(b)}catch(p){}}window[this.movieName]=null;SWFUpload.instances[this.movieName]=null;delete SWFUpload.instances[this.movieName];this.movieName=this.eventQueue=this.customSettings=this.settings=this.movieElement=null;return true}catch(m){return false}};
a.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\nVersion: ",SWFUpload.version,"\nMovie Name: ",this.movieName,"\nSettings:\n\tupload_url:               ",this.settings.upload_url,"\n\tflash_url:                ",this.settings.flash_url,"\n\tuse_query_string:         ",this.settings.use_query_string.toString(),"\n\trequeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n\thttp_success:             ",this.settings.http_success.join(", "),"\n\tassume_success_timeout:   ",
this.settings.assume_success_timeout,"\n\tfile_post_name:           ",this.settings.file_post_name,"\n\tpost_params:              ",this.settings.post_params.toString(),"\n\tfile_types:               ",this.settings.file_types,"\n\tfile_types_description:   ",this.settings.file_types_description,"\n\tfile_size_limit:          ",this.settings.file_size_limit,"\n\tfile_upload_limit:        ",this.settings.file_upload_limit,"\n\tfile_queue_limit:         ",this.settings.file_queue_limit,"\n\tdebug:                    ",
this.settings.debug.toString(),"\n\tprevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n\tbutton_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n\tbutton_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n\tbutton_image_url:         ",this.settings.button_image_url.toString(),"\n\tbutton_width:             ",this.settings.button_width.toString(),"\n\tbutton_height:            ",this.settings.button_height.toString(),"\n\tbutton_text:              ",
this.settings.button_text.toString(),"\n\tbutton_text_style:        ",this.settings.button_text_style.toString(),"\n\tbutton_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n\tbutton_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n\tbutton_action:            ",this.settings.button_action.toString(),"\n\tbutton_disabled:          ",this.settings.button_disabled.toString(),"\n\tcustom_settings:          ",this.settings.custom_settings.toString(),"\nEvent Handlers:\n\tswfupload_loaded_handler assigned:  ",
(typeof this.settings.swfupload_loaded_handler==="function").toString(),"\n\tfile_dialog_start_handler assigned: ",(typeof this.settings.file_dialog_start_handler==="function").toString(),"\n\tfile_queued_handler assigned:       ",(typeof this.settings.file_queued_handler==="function").toString(),"\n\tfile_queue_error_handler assigned:  ",(typeof this.settings.file_queue_error_handler==="function").toString(),"\n\tupload_start_handler assigned:      ",(typeof this.settings.upload_start_handler===
"function").toString(),"\n\tupload_progress_handler assigned:   ",(typeof this.settings.upload_progress_handler==="function").toString(),"\n\tupload_error_handler assigned:      ",(typeof this.settings.upload_error_handler==="function").toString(),"\n\tupload_success_handler assigned:    ",(typeof this.settings.upload_success_handler==="function").toString(),"\n\tupload_complete_handler assigned:   ",(typeof this.settings.upload_complete_handler==="function").toString(),"\n\tdebug_handler assigned:             ",
(typeof this.settings.debug_handler==="function").toString(),"\n"].join(""))};a.addSetting=function(b,f,k){return f==undefined?(this.settings[b]=k):(this.settings[b]=f)};a.getSetting=function(b){if(this.settings[b]!=undefined)return this.settings[b];return""};
a.callFlash=function(b,f){f=f||[];var k=this.getMovieElement(),p,m;try{m=k.CallFunction('<invoke name="'+b+'" returntype="javascript">'+__flash__argumentsToXML(f,0)+"</invoke>");p=eval(m)}catch(l){throw"Call to "+b+" failed";}if(p!=undefined&&typeof p.post==="object")p=this.unescapeFilePostParams(p);return p};a.selectFile=function(){this.callFlash("SelectFile")};a.selectFiles=function(){this.callFlash("SelectFiles")};a.startUpload=function(b){this.callFlash("StartUpload",[b])};
a.cancelUpload=function(b,f){if(f!==false)f=true;this.callFlash("CancelUpload",[b,f])};a.stopUpload=function(){this.callFlash("StopUpload")};a.getStats=function(){return this.callFlash("GetStats")};a.setStats=function(b){this.callFlash("SetStats",[b])};a.getFile=function(b){return typeof b==="number"?this.callFlash("GetFileByIndex",[b]):this.callFlash("GetFile",[b])};a.addFileParam=function(b,f,k){return this.callFlash("AddFileParam",[b,f,k])};
a.removeFileParam=function(b,f){this.callFlash("RemoveFileParam",[b,f])};a.setUploadURL=function(b){this.settings.upload_url=b.toString();this.callFlash("SetUploadURL",[b])};a.setPostParams=function(b){this.settings.post_params=b;this.callFlash("SetPostParams",[b])};a.addPostParam=function(b,f){this.settings.post_params[b]=f;this.callFlash("SetPostParams",[this.settings.post_params])};a.removePostParam=function(b){delete this.settings.post_params[b];this.callFlash("SetPostParams",[this.settings.post_params])};
a.setFileTypes=function(b,f){this.settings.file_types=b;this.settings.file_types_description=f;this.callFlash("SetFileTypes",[b,f])};a.setFileSizeLimit=function(b){this.settings.file_size_limit=b;this.callFlash("SetFileSizeLimit",[b])};a.setFileUploadLimit=function(b){this.settings.file_upload_limit=b;this.callFlash("SetFileUploadLimit",[b])};a.setFileQueueLimit=function(b){this.settings.file_queue_limit=b;this.callFlash("SetFileQueueLimit",[b])};
a.setFilePostName=function(b){this.settings.file_post_name=b;this.callFlash("SetFilePostName",[b])};a.setUseQueryString=function(b){this.settings.use_query_string=b;this.callFlash("SetUseQueryString",[b])};a.setRequeueOnError=function(b){this.settings.requeue_on_error=b;this.callFlash("SetRequeueOnError",[b])};a.setHTTPSuccess=function(b){if(typeof b==="string")b=b.replace(" ","").split(",");this.settings.http_success=b;this.callFlash("SetHTTPSuccess",[b])};
a.setAssumeSuccessTimeout=function(b){this.settings.assume_success_timeout=b;this.callFlash("SetAssumeSuccessTimeout",[b])};a.setDebugEnabled=function(b){this.settings.debug_enabled=b;this.callFlash("SetDebugEnabled",[b])};a.setButtonImageURL=function(b){if(b==undefined)b="";this.settings.button_image_url=b;this.callFlash("SetButtonImageURL",[b])};
a.setButtonDimensions=function(b,f){this.settings.button_width=b;this.settings.button_height=f;var k=this.getMovieElement();if(k!=undefined){k.style.width=b+"px";k.style.height=f+"px"}this.callFlash("SetButtonDimensions",[b,f])};a.setButtonText=function(b){this.settings.button_text=b;this.callFlash("SetButtonText",[b])};a.setButtonTextPadding=function(b,f){this.settings.button_text_top_padding=f;this.settings.button_text_left_padding=b;this.callFlash("SetButtonTextPadding",[b,f])};
a.setButtonTextStyle=function(b){this.settings.button_text_style=b;this.callFlash("SetButtonTextStyle",[b])};a.setButtonDisabled=function(b){this.settings.button_disabled=b;this.callFlash("SetButtonDisabled",[b])};a.setButtonAction=function(b){this.settings.button_action=b;this.callFlash("SetButtonAction",[b])};a.setButtonCursor=function(b){this.settings.button_cursor=b;this.callFlash("SetButtonCursor",[b])};
a.queueEvent=function(b,f){if(f==undefined)f=[];else f instanceof Array||(f=[f]);var k=this;if(typeof this.settings[b]==="function"){this.eventQueue.push(function(){this.settings[b].apply(this,f)});setTimeout(function(){k.executeNextEvent()},0)}else if(this.settings[b]!==null)throw"Event handler "+b+" is unknown or is not a function";};a.executeNextEvent=function(){var b=this.eventQueue?this.eventQueue.shift():null;typeof b==="function"&&b.apply(this)};
a.unescapeFilePostParams=function(b){var f=/[$]([0-9a-f]{4})/i,k={},p;if(b!=undefined){for(var m in b.post)if(b.post.hasOwnProperty(m)){p=m;for(var l;(l=f.exec(p))!==null;)p=p.replace(l[0],String.fromCharCode(parseInt("0x"+l[1],16)));k[p]=b.post[m]}b.post=k}return b};a.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(b){return false}};a.flashReady=function(){var b=this.getMovieElement();if(b){this.cleanUp(b);this.queueEvent("swfupload_loaded_handler")}else this.debug("Flash called back ready but the flash movie can't be found.")};
a.cleanUp=function(b){try{if(this.movieElement&&typeof b.CallFunction==="unknown"){this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)");for(var f in b)try{if(typeof b[f]==="function")b[f]=null}catch(k){}}}catch(p){}window.__flash__removeCallback=function(m,l){try{if(m)m[l]=null}catch(w){}}};a.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")};
a.fileQueued=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("file_queued_handler",b)};a.fileQueueError=function(b,f,k){b=this.unescapeFilePostParams(b);this.queueEvent("file_queue_error_handler",[b,f,k])};a.fileDialogComplete=function(b,f,k){this.queueEvent("file_dialog_complete_handler",[b,f,k])};a.uploadStart=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("return_upload_start_handler",b)};
a.returnUploadStart=function(b){var f;if(typeof this.settings.upload_start_handler==="function"){b=this.unescapeFilePostParams(b);f=this.settings.upload_start_handler.call(this,b)}else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";if(f===undefined)f=true;f=!!f;this.callFlash("ReturnUploadStart",[f])};a.uploadProgress=function(b,f,k){b=this.unescapeFilePostParams(b);this.queueEvent("upload_progress_handler",[b,f,k])};
a.uploadError=function(b,f,k){b=this.unescapeFilePostParams(b);this.queueEvent("upload_error_handler",[b,f,k])};a.uploadSuccess=function(b,f,k){b=this.unescapeFilePostParams(b);this.queueEvent("upload_success_handler",[b,f,k])};a.uploadComplete=function(b){b=this.unescapeFilePostParams(b);this.queueEvent("upload_complete_handler",b)};a.debug=function(b){this.queueEvent("debug_handler",b)};
a.debugMessage=function(b){if(this.settings.debug){var f=[];if(typeof b==="object"&&typeof b.name==="string"&&typeof b.message==="string"){for(var k in b)b.hasOwnProperty(k)&&f.push(k+": "+b[k]);b=f.join("\n")||"";f=b.split("\n");b="EXCEPTION: "+f.join("\nEXCEPTION: ");SWFUpload.Console.writeLine(b)}else SWFUpload.Console.writeLine(b)}};SWFUpload.Console={};
SWFUpload.Console.writeLine=function(b){var f,k;try{f=document.getElementById("SWFUpload_Console");if(!f){k=document.createElement("form");document.getElementsByTagName("body")[0].appendChild(k);f=document.createElement("textarea");f.id="SWFUpload_Console";f.style.fontFamily="monospace";f.setAttribute("wrap","off");f.wrap="off";f.style.overflow="auto";f.style.width="700px";f.style.height="350px";f.style.margin="5px";k.appendChild(f)}f.value+=b+"\n";f.scrollTop=f.scrollHeight-f.clientHeight}catch(p){alert("Exception: "+
p.name+" Message: "+p.message)}};
(function(b){var f=["swfupload_loaded_handler","file_queued_handler","file_queue_error_handler","file_dialog_start_handler","file_dialog_complete_handler","upload_start_handler","upload_progress_handler","upload_error_handler","upload_success_handler","upload_complete_handler","queue_complete_handler"],k=[];b.fn.swfupload=function(){var p=b.makeArray(arguments);return this.each(function(){var m;if(p.length==1&&typeof p[0]=="object"){m=b(this).data("__swfu");if(!m){var l=p[0],w=b(this);m=[];b.merge(m,
f);b.merge(m,k);b.each(m,function(M,N){var L=N.replace(/_handler$/,"").replace(/_([a-z])/g,function(D,R){return R.toUpperCase()});l[N]=function(){var D=b.Event(L);w.trigger(D,b.makeArray(arguments));return!D.isDefaultPrevented()}});b(this).data("__swfu",new SWFUpload(l))}}else if(p.length>0&&typeof p[0]=="string"){var B=p.shift();(m=b(this).data("__swfu"))&&m[B]&&m[B].apply(m,p)}})};b.swfupload={additionalHandlers:function(){if(arguments.length===0)return k.slice();else b(arguments).each(function(p,
m){b.merge(k,b.makeArray(m))})},defaultHandlers:function(){return f.slice()},getInstance:function(p){return b(p).data("__swfu")}}})(jQuery);
(function(){function b(m){this.options=m;this.$p=jQuery("#"+this.options.upload_progress_id);this.$p.css("display","none");this.count=0}var f=0,k=0,p=0;jQuery.fn.pandaUploader=function(m,l,w){function B(y){l.disable_submit_button&&A.closest("form").find("input[type=submit]").each(function(){$(this).attr("disabled",y)})}function M(){A.closest("form").submit(L);B(true)}function N(y,r){f++;k++;y=$("#"+l.upload_filename_id);if(y.size()!=0){y.val(r.name);B(false)}}function L(){t.swfupload("startUpload");
return false}function D(y,r){B(true);l.progress_handler&&l.progress_handler.start(r)}function R(){t.swfupload("cancelUpload","",false);$("#"+l.upload_filename_id).val("");l.progress_handler.reset();p=k=f=0;B(true);e.stopPropagation()}function Y(y,r,v,G){try{l.progress_handler&&l.progress_handler.setProgress(r,v,G)}catch(da){}}function ea(y,r,v){A.val(eval("("+v+")").id);k--}function x(y,r,v,G){alert("There was an error uploading the file.\n\nHTTP error code "+G);k--;p++}function C(){if(f>0&&k<=0&&
p<=0)A.val()?P().submit():alert("The video ID was not stored on the form")}function P(){return A.closest("form").get(0)}var A=this;if(m===undefined){alert("There was an error setting up the upload form. (The upload parameters were not specified).");return false}l=l===undefined?{}:l;w=w===undefined?{}:w;if(l.upload_button_id===undefined){alert("You have to specify the button id");return false}if(A.size()==0){alert("The jQuery element is empty. Method pandaUploader() cannot be executed");return false}if(!P()){alert("Could not find a suitable form. Please place the call to pandaUploader() after the form, or to be executed onload().");
return false}if($(P()).find("[name=submit], #submit").length!=0){alert('An element of your video upload form is incorrect (most probably the submit button). Neither NAME nor ID can be set to "submit" on any field.');return false}var S=jQuery("#"+l.upload_cancel_button_id);S&&S.click(R);l=jQuery.extend({upload_filename_id:null,upload_progress_id:null,api_host:"api.pandastream.com",progress_handler:null,uploader_dir:"/panda_uploader",disable_submit_button:false},l);l.api_url=l.api_url||"http://"+l.api_host+
"/v2";if(!l.progress_handler)l.progress_handler=new b(l);var t=this.swfupload(jQuery.extend({upload_url:l.api_url+"/videos.json",file_size_limit:0,file_types:"*.*",file_types_description:"All Files",file_upload_limit:0,flash_url:l.uploader_dir+"/swfupload.swf",button_image_url:l.uploader_dir+"/choose_file_button.png",button_width:87,button_height:27,button_placeholder_id:l.upload_button_id,post_params:m,file_post_name:"file",debug:false},w));t.bind("swfuploadLoaded",M);t.bind("fileQueued",N);t.bind("uploadStart",
D);t.bind("uploadProgress",Y);t.bind("uploadSuccess",ea);t.bind("uploadError",x);t.bind("uploadComplete",C);return t};b.prototype={start:function(m){if(this.$p.size()!=0){this.$p.find(".progress-inside").size()==0&&this.$p.append('<div class="progress-inside"></div>');this.progress=this.$p.find(".progress-inside");this.setProgress(m,0,m.size);this.$p.css("display","block");var l=this;setInterval(function(){l.animateBarBg()},20)}},setProgress:function(m,l,w){if(this.progress){m=Math.ceil(l/w*100);
$(this.progress).css("width",m+"%")}},animateBarBg:function(){this.count++;var m=parseInt(this.$p.css("background-position").split(" "));if(this.count==37){this.count=0;this.$p.css("background-position",m+36+"px 0px")}else this.$p.css("background-position",m-1+"px 0px")},reset:function(){$(this.progress).css("width","0%");this.$p.css("display","none")}}})();
